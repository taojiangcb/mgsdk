!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.platId=0,this.gameId=0,this.setting={canBanner:!1,canPay:!1,canViedo:!1,canShare:!1},this.sdk_server="http://localhost:3005",this.sdk_server_dev="http://localhost:3005",this.sdk_server_local="http://localhost:3005",this.mode=0,this.user={}}return Object.defineProperty(t.prototype,"sdk_server_url",{get:function(){return 0===this.mode?this.sdk_server_local:1===this.mode?this.sdk_server_dev:this.sdk_server},enumerable:!0,configurable:!0}),t}();e.Define=r,e.SDK_MODE={DEBUG:0,TEST:1,ONLINE:2},e.PLAT_IDS={WEB:1e3,WX:1100},e.ENUM_SERVER={platServer:"platServer",loginServer:"loginServer"},e.ENUM_SVR_FUN={getPlatInfo:"getPlatInfo",login:"login"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.showLog=!1}return t.prototype.internalInit=function(){this.showLog=mgsdk.initOpts.outLog||!0},t.prototype.error=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];console.error(t,e)},t.prototype.log=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.showLog&&console.log(t,e)},t.prototype.warn=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.showLog&&console.warn(t,e)},t}();e.log=new r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(8),i=n(0),s=function(){function t(){}return t.prototype.internalInit=function(){var t=this;this.mInitOpts=mgsdk.initOpts,this.mInitOpts.libUrl&&mgsdk.native.requireLib(this.mInitOpts.libUrl,function(){t.getPlatInfo()},function(){var e="第三方 lib 加载失败:"+t.mInitOpts.libUrl;r.log.error(e),t.mInitOpts.fail(e)})},t.prototype.getPlatInfo=function(){var t=this;o.HttpTools.callServer(i.ENUM_SERVER.platServer,i.ENUM_SVR_FUN.getPlatInfo,{paltId:this.mInitOpts.platId,gameId:this.mInitOpts.gameId},function(e){t.mConfigCli=e.data.cli_config,t.mInitOpts.success&&t.mInitOpts.success(e)},function(){var e="get platInfo fail == paltId:"+t.mInitOpts.platId+",gameId:"+t.mInitOpts.gameId;t.mInitOpts.fail&&t.mInitOpts.fail(e)})},Object.defineProperty(t.prototype,"cliConfig",{get:function(){return this.mConfigCli},enumerable:!0,configurable:!0}),t.prototype.login=function(t){this.mLoginOpts=t},t.prototype.__sendLogin=function(t){var e=this,n={user:t,platId:this.mInitOpts.platId,gameId:this.mInitOpts.gameId};o.HttpTools.callServer(i.ENUM_SERVER.platServer,i.ENUM_SVR_FUN.login,n,function(t){t.success?mgsdk.define.user=t.data:r.log.error(t.msg)},function(){var t="登录失败 params"+JSON.stringify(n);r.log.error(t),e.mLoginOpts.fail&&e.mLoginOpts.fail()})},t}();e.PlatBase=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.httpRequst=function(t){},t.prototype.requireLib=function(t,e,n){},t.prototype.timeOnce=function(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o]},t.prototype.clearTimeOnce=function(t){},t.prototype.setItem=function(t,e){localStorage.setItem(t,e)},t.prototype.getItem=function(t){localStorage.getItem(t)},t}();e.NativeBase=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=new(n(5).SDK);console.log("----------index.js----------------"),window&&(window.mgsdk=r)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),o=n(0),i=n(1),s=n(12),u=function(){function t(){}return t.prototype.init=function(t,e,n){this.mDefine=new o.Define,this.mDefine.platId=t.platId,this.mDefine.gameId=t.gameId,n&&s.ObjectUtil.copyObj(this.mDefine.setting,n),this.mDefine.mode=t.mode,this.mInitOpts=t,this.mLifeOpts=e,i.log.internalInit(),this.mPlat=r.PlatFactory.createFactoryInstance(t.platId),this.mNative=r.PlatFactory.createNativeInstance(t.platId),this.mPlat.internalInit()},Object.defineProperty(t.prototype,"lifeOpts",{get:function(){return this.mLifeOpts},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"initOpts",{get:function(){return this.mInitOpts},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"user",{get:function(){return this.mDefine.user},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setting",{get:function(){return this.mDefine.setting},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"plat",{get:function(){return this.mPlat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"define",{get:function(){return this.mDefine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"native",{get:function(){return this.mNative},enumerable:!0,configurable:!0}),t}();e.SDK=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(7),i=n(9),s=n(10),u=n(11),c=function(){function t(){}return t.createFactoryInstance=function(t){switch(t){case r.PLAT_IDS.WX:return new o.PlatWx;default:return new i.PlatDebug}},t.createNativeInstance=function(t){switch(t){case r.PLAT_IDS.WX:return new s.NativeWx;default:return new u.NativeDebug}},t}();e.PlatFactory=c},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.login=function(t){},e}(n(2).PlatBase);e.PlatWx=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=function(){function t(){this._retryTime=0}return t.callServer=function(t,e,n,r,o,i){void 0===i&&(i="POST");var s=mgsdk.define.sdk_server_url+"/"+t+"/"+e;this.send(s,n,r,o,i)},t.send=function(e,n,r,o,i){var s;void 0===i&&(i="POST"),(s=this._pool&&this._pool.length>0?this._pool.shift():new t).setTo(e,n,r,o,i),s.send()},t.prototype.setTo=function(t,e,n,r,o){void 0===o&&(o="POST"),this._retryTime=0;var i=this;(e=e||{}).timestamp=Date.now(),this._request={url:t,method:o,data:e,success:function(t){var e;if("string"==typeof t)try{e=JSON.parse(t)}catch(n){e={success:!1,data:t}}else e=t.data;n&&n(e),i._recover()},fail:function(t){i._retryTime++,i._retryTime>3?(r&&r(),i._recover()):mgsdk.native.timeOnce(3e3,i,i.send)}}},t.prototype.send=function(){this._request&&(mgsdk.native?mgsdk.native.httpRequst(this._request):r.log.error("native还没有初始化"))},t.prototype._recover=function(){t._pool||(t._pool=[]),this._request=null,t._pool.push(this)},t}();e.HttpTools=o},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.login=function(t){var e=t.arg;e.user,e.pwd},e}(n(2).PlatBase);e.PlatDebug=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.httpRequst=function(t){var e={};for(var n in t)e[n]=t[n];if(t.header){for(var r={},o=0;o<t.header.length;o+=2)r[t.header[o]]=t.header[o+1];e.header=r}wx.request(e)},e.prototype.setItem=function(t,e){wx.setStorageSync(t,e)},e.prototype.getItem=function(t){return wx.getStorageSync(t)},e}(n(3).NativeBase);e.NativeWx=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return t.call(this)||this}return o(e,t),e}(n(3).NativeBase);e.NativeDebug=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.copyObj=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t}();e.ObjectUtil=r}]);